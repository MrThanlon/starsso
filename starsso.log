[2020-04-06 17:35:02,225] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-04-06 17:39:51,969] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 11:21:06,980] ERROR in app: Exception on /user/permission [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/permission.py", line 38, in permission
    current_app.System.public == 1
AttributeError: type object 'System' has no attribute 'public'
[2020-07-10 11:22:31,055] ERROR in app: Exception on /user/permission [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/permission.py", line 38, in permission
    current_app.System.public == 1
AttributeError: type object 'System' has no attribute 'public'
[2020-07-10 11:44:41,610] ERROR in app: Exception on /user/profile [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/profile.py", line 102, in profile
    "phone": attrs.get(current_app.ldap_attr_phone)[0].decode('utf-8'),
TypeError: 'NoneType' object is not subscriptable
[2020-07-10 11:49:09,507] ERROR in app: Exception on /user/profile [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/profile.py", line 102, in profile
    "phone": attrs.get(current_app.ldap_attr_phone)[0].decode('utf-8'),
TypeError: 'NoneType' object is not subscriptable
[2020-07-10 11:49:09,926] ERROR in app: Exception on /user/profile [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/profile.py", line 102, in profile
    "phone": attrs.get(current_app.ldap_attr_phone)[0].decode('utf-8'),
TypeError: 'NoneType' object is not subscriptable
[2020-07-10 11:49:30,018] ERROR in app: Exception on /user/profile [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/profile.py", line 102, in profile
    "phone": attrs.get(current_app.ldap_attr_phone)[0].decode('utf-8'),
TypeError: 'NoneType' object is not subscriptable
[2020-07-10 11:49:30,465] ERROR in app: Exception on /user/profile [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/profile.py", line 102, in profile
    "phone": attrs.get(current_app.ldap_attr_phone)[0].decode('utf-8'),
TypeError: 'NoneType' object is not subscriptable
[2020-07-10 11:49:38,236] ERROR in app: Exception on /user/profile [POST]
Traceback (most recent call last):
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 2446, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1951, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1820, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1949, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ziyihuang/Desktop/source/starsso/venv/lib/python3.7/site-packages/flask/app.py", line 1935, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 153, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/utils/__init__.py", line 172, in wrapped
    return f()
  File "/Users/ziyihuang/Desktop/source/starsso/starsso/user/profile.py", line 102, in profile
    "phone": attrs.get(current_app.ldap_attr_phone)[0].decode('utf-8'),
TypeError: 'NoneType' object is not subscriptable
[2020-07-10 11:54:15,480] WARNING in __init__: None-admin user request admin API, denied.
[2020-07-10 13:35:27,245] INFO in auth: deny login request with user "111" for existing session of user "hzy"
[2020-07-10 14:06:17,216] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 14:13:58,726] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 14:14:17,605] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
[2020-07-10 14:14:28,698] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
[2020-07-10 14:14:34,873] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 14:14:42,764] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 14:16:17,505] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
[2020-07-10 14:16:23,605] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 14:17:04,159] WARNING in __init__: 'fullName'
[2020-07-10 14:17:48,275] WARNING in __init__: 'fullName'
[2020-07-10 14:19:37,750] WARNING in __init__: 'fullName'
[2020-07-10 14:19:58,474] WARNING in __init__: 'fullName'
[2020-07-10 14:21:38,106] WARNING in __init__: 'email'
[2020-07-10 14:40:33,050] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 14:44:01,839] INFO in auth: login with username hzy. invalid password.
[2020-07-10 14:44:04,690] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 16:07:05,118] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 16:23:33,169] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
[2020-07-10 16:23:56,655] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
[2020-07-10 16:25:06,456] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
[2020-07-10 16:29:21,772] INFO in auth: user "test" logined. (ldap dn: cn=test,ou=starstudio,dc=nodomain)
[2020-07-10 16:29:21,991] WARNING in __init__: 'email'
[2020-07-10 16:29:59,003] INFO in auth: user "test" logined. (ldap dn: cn=test,ou=starstudio,dc=nodomain)
[2020-07-10 16:29:59,164] WARNING in __init__: 'email'
[2020-07-10 16:34:43,641] INFO in auth: user "test" logined. (ldap dn: cn=test,ou=starstudio,dc=nodomain)
[2020-07-10 16:34:55,776] WARNING in __init__: 'email'
[2020-07-10 16:38:32,647] INFO in auth: user "test" logined. (ldap dn: cn=test,ou=starstudio,dc=nodomain)
[2020-07-10 16:42:29,238] INFO in auth: user "hzy" logined. (ldap dn: cn=hzy,ou=starstudio,dc=nodomain)
[2020-07-10 16:42:40,484] INFO in auth: user "mxt" logined. (ldap dn: cn=mxt,ou=starstudio,dc=nodomain)
